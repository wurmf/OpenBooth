language: java

jdk:
  - oraclejdk8
  
branches:
  only:
    - master
    - dev
    - opencv_included

build:
  pre_ci:
    - docker build -t openbooth/java8-maven:latest .

  #Prepare Docker-Container with OpenCV and Java 8
  pre_ci_boot:
    image_name: openbooth/java8-maven
    image_tag: latest
    pull: false
    

  ci:
    #Build project
    - mvn compile

    #Run tests
    - mvn test
    
    #Copy results to shippable/testresults
    - mkdir -p shippable/testresults
    - cp -r target/surefire-reports/* shippable/testresults

integrations:
  notifications:
    - integrationName: OpenBooth_SlackIntegration
      type: slack
      recipients:
        - "#build"

